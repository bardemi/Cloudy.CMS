@page
@using Cloudy.CMS.ContentTypeSupport
@using Cloudy.CMS.ContentTypeSupport.Name
@using System.ComponentModel.DataAnnotations
@using System.Reflection
@model Cloudy.CMS.UI.Areas.Admin.Pages.IndexModel
@inject IContentTypeProvider ContentTypeProvider
@inject IContentTypeNameProvider ContentTypeNameProvider

@await Html.PartialAsync("Shared/Nav")

<div class="container">
    <h1 class="h2">What to edit?</h1>

    @foreach (var contentType in ContentTypeProvider.GetAll())
    {
        var name = ContentTypeNameProvider.Get(contentType.Type);
        var description = contentType.Type.GetCustomAttribute<DisplayAttribute>()?.Description;
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">@name.Name</h5>
                @if(description != null){
                    <p class="card-text">@description</p>
                }
                <a class="btn btn-primary" href="@Url.Page("List", new { area = "Admin", ContentType = contentType.Name })">List all</a>
                <a class="btn btn-beta" href="@Url.Page("New", new { area = "Admin", ContentType = contentType.Name })">New</a>
            </div>
        </div>
    }
</div>

@await Html.PartialAsync("Shared/Footer")